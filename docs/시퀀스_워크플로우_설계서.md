# AI 업무 자동화 에이전트 시퀀스·워크플로우 설계서

본 문서는 「AI 업무 자동화 에이전트 아키텍처 설계서」를 기반으로, 실제 업무가 **어떤 순서(Sequence)와 상태(Workflow)** 로 처리되는지를 상세히 정의한다. 특히 조직 업무에 중요한 **검토·승인·완료 흐름**을 명확히 드러내는 것을 목표로 한다.

---

## 1. 설계 목적

- 업무 자동화의 **실행 흐름을 가시화**
- 에이전트 간 협업 구조를 시퀀스 단위로 명확화
- 승인·보안·품질 게이트를 포함한 현실적 업무 흐름 정의
- BPMN/활동도 설계의 기준 문서 역할 수행

---

## 2. 공통 업무 상태 모델 (Workflow State Model)

모든 업무는 아래의 공통 상태 머신을 따른다.

```
[ DRAFT ]
    │  (초안 생성)
    ▼
[ REVIEW ]
    │  (내부 검토/정합성 확인)
    ▼
[ APPROVAL_REQUIRED ]  ──(필요 시)──▶  승인 요청
    │                                   (ask)
    ▼
[ APPROVED ]
    │  (발행/등록/공유)
    ▼
[ COMPLETED ]
    │
    ▼
[ ARCHIVED ]
```

- 승인 불필요 업무는 `REVIEW → COMPLETED`로 단축 가능
- 모든 상태 전이는 로그 및 이력으로 기록됨

---

## 3. 기본 시퀀스 (Generic Task Processing)

### 3.1 표준 업무 처리 시퀀스

```
User
 │ 업무 요청
 ▼
Intake Layer
 │ 업무 분류/리스크 태깅
 ▼
Policy Injection
 │ 규칙·템플릿 주입
 ▼
Orchestrator
 │ 작업 분해(Task Plan)
 ├─ delegate → Sub-Agent A
 ├─ delegate → Sub-Agent B
 └─ delegate → Sub-Agent C
 │
 ▼
Sub-Agents
 │ 초안/분석/산출물 생성
 ▼
Review Gate
 │ 품질·형식·정합성 점검
 ▼
(조건) Approval Gate
 │ 승인 요청/대기
 ▼
Completion Gate
 │ 완료 조건 확인
 ▼
Output
```

---

## 4. 대표 시퀀스 시나리오

## 4.1 회의 → 회의록·메일·일정 자동화

### 시퀀스 설명
회의 메모 입력만으로 후속 업무 전반을 자동 처리하는 시나리오이다.

```
User
 │ 회의 메모 입력
 ▼
Intake
 │ 유형: 회의 / 태그: 내부
 ▼
Policy Injection
 │ 회의록 템플릿 주입
 ▼
Orchestrator
 │ Task 분해
 ├─ Doc-Agent: 회의록/결정사항
 ├─ PMO-Agent: 액션아이템/일정
 └─ Comms-Agent: 후속 메일
 ▼
Review Gate
 │ 누락/형식 점검
 ▼
(조건) Approval Gate
 │ 대외 메일이면 승인 요청
 ▼
Completed
 │ 회의록 + 메일 초안 + 일정 초안
```

---

## 4.2 대외 메일 발신 업무 시퀀스

```
User
 │ "이 내용으로 대외 회신 보내줘"
 ▼
Intake
 │ 태그: 대외 발신
 ▼
Policy Injection
 │ 조직 말투/서식 주입
 ▼
Comms-Agent
 │ 메일 초안 생성
 ▼
Compliance-Agent
 │ 대외/개인정보 점검
 ▼
Approval Gate
 │ 승인 요청 (ask)
 ▼
Approved
 │ 발신 허용
 ▼
Completed
```

---

## 4.3 데이터 집계 및 보고 시퀀스

```
User
 │ 데이터 파일 제공
 ▼
Intake
 │ 유형: 데이터 분석
 ▼
Policy Injection
 │ 보고서 템플릿 주입
 ▼
Data-Agent
 │ 집계/지표 계산
 ▼
Doc-Agent
 │ 결과 보고서 작성
 ▼
Review Gate
 │ 수치/기간/출처 확인
 ▼
Completed
```

---

## 5. 승인(Approval) 상세 흐름

### 5.1 승인 요청 시퀀스

```
Task State: APPROVAL_REQUIRED
 │
 ▼
permission.ask
 │ 승인 사유/대상/영향 표시
 ▼
User Approval
 │ 승인 / 반려
 ▼
(승인) APPROVED → COMPLETED
(반려) REVIEW → 수정 루프
```

- 모든 승인 요청은 목적·영향·리스크를 함께 제시
- 승인/반려 모두 이력으로 저장

---

## 6. 예외·실패 처리 흐름

### 6.1 검증 실패

```
Review Gate
 │ 검증 실패
 ▼
Orchestrator
 │ 원인 요약
 │ 수정 Task 재생성
 ▼
Sub-Agent 재수행
```

### 6.2 승인 반려

```
Approval Gate
 │ 반려
 ▼
Orchestrator
 │ 반려 사유 반영
 ▼
REVIEW 상태로 복귀
```

---

## 7. 로그·감사(Audit) 흐름

모든 주요 이벤트는 감사 로그로 남는다.

- 요청 인입 시점
- 규칙/정책 주입 내역
- 서브 에이전트 실행 기록
- 승인 요청 및 결과
- 최종 산출물

---

## 8. 확장 시퀀스 설계 포인트

- 다중 승인자 워크플로우
- 병렬 서브 에이전트 실행
- 외부 시스템(그룹웨어/메일/캘린더) 연계
- 장기 업무(상태 유지) 지원

---

## 9. 요약

본 시퀀스·워크플로우 설계는 AI 에이전트가 **사람의 업무 흐름을 그대로 따르되**, 누락·실수·위험을 구조적으로 차단하도록 설계되었다. 이는 단순 자동화를 넘어, **조직 표준 업무 프로세스의 자동 집행자**로서 AI를 정의한다.

