# AI 업무 자동화 에이전트 아키텍처 설계서

본 문서는 「AI 업무 자동화 에이전트 PRD」를 기반으로, 시스템의 전체 구조와 구성 요소, 그리고 주요 실행 흐름을 정의한다. 본 설계서는 구현, 검토, 조직 내 설명을 모두 고려한 기준 아키텍처 문서이다.

---

## 1. 아키텍처 설계 목표

- 업무 자동화를 위한 **표준 아키텍처 제시**
- 코딩 에이전트 → 일반 업무 에이전트로의 **확장 가능 구조 확보**
- 보안·승인·품질을 기본 내재한 **운영 가능 시스템** 설계
- 멀티 에이전트 기반의 역할 분담 및 오케스트레이션 명확화

---

## 2. 전체 시스템 아키텍처 개요

### 2.1 논리적 구성도 (Logical Architecture)

```
[ User / Client ]
        │
        ▼
[ Intake Layer ]  ── 요청 수집 / 분류
        │
        ▼
[ Policy & Context Injection Layer ]
        │  (규칙·템플릿·조직 정책 주입)
        ▼
[ Orchestrator (Planner-Sisyphus) ]
        │  ├─ Plan / Delegate / Track / Gate
        │
        ├─────────────┬─────────────┬─────────────┐
        ▼             ▼             ▼             ▼
 [ Doc-Agent ]  [ Comms-Agent ] [ PMO-Agent ] [ Data-Agent ]
        │             │             │             │
        └─────────────┴─────────────┴─────────────┘
                        │
                        ▼
              [ Tool Execution Layer ]
                        │
                        ▼
              [ Approval / Audit Layer ]
                        │
                        ▼
                    [ Output ]
```

---

## 3. 계층별 상세 설계

### 3.1 Intake Layer (요청 인입 계층)

**역할**
- 사용자 요청 수신
- 요청 유형 분류
- 민감도 및 리스크 태깅

**주요 기능**
- 업무 유형 분류: 문서 / 메일 / 회의 / 일정 / 데이터 / 결재
- 리스크 태그: 대외 발신, 개인정보, 보안, 계약, 예산

**연계 훅**
- `chat.message`

---

### 3.2 Policy & Context Injection Layer

**역할**
- 조직·프로젝트 규칙 주입
- 문서/커뮤니케이션 템플릿 적용
- 말투·표현·형식 표준화

**주요 구성**
- 업무 규칙 파일 (.rules.json)
- 템플릿 저장소
- 조직 정책 세트

**연계 훅**
- `experimental.chat.system.transform`
- `experimental.chat.messages.transform`

---

### 3.3 Orchestrator Layer

**핵심 컴포넌트: Planner-Sisyphus**

**책임**
- 요청을 작업 단위(Task)로 분해
- 서브 에이전트에 위임
- 작업 상태 관리
- 완료 조건(Definition of Done) 검증

**내부 기능**
- Task Planner
- Delegation Manager
- State Manager (Draft / Review / Approval / Completed)
- Completion Gate

---

### 3.4 Sub-Agent Layer

각 서브 에이전트는 단일 책임 원칙을 따른다.

| 에이전트 | 주요 책임 |
|---|---|
| Doc-Agent | 보고서, 회의록, 제안서 생성 |
| Comms-Agent | 메일, 공지, 대외 문서 |
| PMO-Agent | 일정, 액션아이템, 결재 흐름 |
| Data-Agent | 데이터 집계, 표/차트 |
| Research-Agent | 근거 조사 및 요약 |
| Compliance-Agent | 보안·개인정보·규정 점검 |
| Ops-Agent | 파일 정리, 공유, 등록 |

---

### 3.5 Tool Execution Layer

**역할**
- 실제 행동 수행 계층

**대표 Tool**
- 문서 생성/편집
- 메일 초안 생성
- 일정 후보 생성
- 파일 변환/정리
- 데이터 분석

**연계 훅**
- `tool.execute.before`
- `tool.execute.after`

---

### 3.6 Approval / Audit Layer

**역할**
- 위험 작업 및 민감 행위에 대한 승인 강제
- 모든 승인 이력 및 작업 로그 기록

**승인 대상**
- 대외 메일 발송
- 일정 등록
- 파일 공유/권한 변경
- 개인정보 포함 문서

**연계 훅**
- `permission.ask`
- `command.execute.before`

---

## 4. 주요 시퀀스 다이어그램

### 4.1 회의 후속 업무 자동화 흐름

```
User
 │  회의 메모 입력
 ▼
Intake Layer
 │  분류/태깅
 ▼
Policy Injection
 │  회의 템플릿 주입
 ▼
Orchestrator
 │  Task 분해
 ├─ Doc-Agent → 회의록/결정사항
 ├─ PMO-Agent → 액션아이템/일정
 ├─ Comms-Agent → 후속 메일
 └─ Compliance-Agent → 대외/개인정보 점검
 ▼
Approval Gate (필요 시)
 ▼
Output (회의록/메일/일정 초안)
```

---

## 5. 보안 및 품질 설계 원칙

- **기본 차단(Default Deny)**, 승인 기반 허용
- 모든 산출물은 규칙·템플릿 준수
- 변경·발신·공유 행위는 로그 및 추적 가능
- 실패 시 안전한 중단 및 원인 명시

---

## 6. 확장 설계 포인트

- 신규 서브 에이전트 플러그인 방식 추가
- 조직별 규칙 세트 독립 관리
- 외부 시스템(메일, 캘린더, 그룹웨어) 연계
- CI/CD·RPA와 결합 가능

---

## 7. 요약

본 아키텍처는 AI를 단순 보조 도구가 아닌, **업무 수행 주체**로 만들기 위한 구조이다. 핵심은 자동화가 아니라, **통제·책임·완료 기준이 명확한 자동화**이며, 이는 오케스트레이터와 훅 기반 정책 레이어를 통해 달성된다.

